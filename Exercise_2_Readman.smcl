{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}results
       {txt}log:  {res}/Users/peterreadman/Dropbox/@10,000 feet and Runway/MA in Economics at Hunter/ECO 727 - Data Analysis and Research Methods/Analysis/Exercise_2_Readman.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}11 Jan 2025, 08:29:29
{txt}
{com}. global ex=2
{txt}
{com}. global lname="Readman"
{txt}
{com}. global eyear=2024
{txt}
{com}. global tcscale=1.5
{txt}
{com}. 
. * part a
. * using prepared CPS ORGs data 1982-2024
.   use "../Data/CPS ORGs, 1982-2024.dta", clear
{txt}
{com}.   run data_check
{txt}
{com}. 
. * describing, summarizing, and listing the data 
.   describe

{txt}Contains data from {res}../Data/CPS ORGs, 1982-2024.dta
{txt} Observations:{res}     6,738,088                  
{txt}    Variables:{res}            29                  7 Jan 2025 05:57
{txt}{hline}
Variable      Storage   Display    Value
    name         type    format    label      Variable label
{hline}
{p 0 48}{res}{bind:year           }{txt}{bind: int     }{bind:%8.0g     }{space 1}{bind:         }{bind:  }{res}{res}survey year{p_end}
{p 0 48}{bind:serial         }{txt}{bind: long    }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}household serial number{p_end}
{p 0 48}{bind:month          }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:MONTH    }{bind:  }{res}{res}month{p_end}
{p 0 48}{bind:hwtfinl        }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}household weight, basic monthly{p_end}
{p 0 48}{bind:cpsid          }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}cpsid, household record{p_end}
{p 0 48}{bind:mish           }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:MISH     }{bind:  }{res}{res}month in sample, household level{p_end}
{p 0 48}{bind:region         }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:REGION   }{bind:  }{res}{res}region and division{p_end}
{p 0 48}{bind:pernum         }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:         }{bind:  }{res}{res}person number in sample unit{p_end}
{p 0 48}{bind:wtfinl         }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}final basic weight{p_end}
{p 0 48}{bind:cpsidv         }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}validated longitudinal identifier{p_end}
{p 0 48}{bind:cpsidp         }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}cpsid, person record{p_end}
{p 0 48}{bind:earnweek2      }{txt}{bind: double  }{bind:%12.0g    }{space 1}{txt}EARNWEEK2{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}weekly earnings (rounded){p_end}
{p 0 48}{bind:hourwage2      }{txt}{bind: double  }{bind:%12.0g    }{space 1}{txt}HOURWAGE2{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}hourly wage (rounded){p_end}
{p 0 48}{bind:age            }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:AGE      }{bind:  }{res}{res}age{p_end}
{p 0 48}{bind:sex            }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:SEX      }{bind:  }{res}{res}sex{p_end}
{p 0 48}{bind:race           }{txt}{bind: int     }{bind:%58.0g    }{space 1}{bind:RACE     }{bind:  }{res}{res}race{p_end}
{p 0 48}{bind:empstat        }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:EMPSTAT  }{bind:  }{res}{res}employment status{p_end}
{p 0 48}{bind:occ1950        }{txt}{bind: int     }{bind:%8.0g     }{space 1}{bind:OCC1950  }{bind:  }{res}{res}occupation, 1950 basis{p_end}
{p 0 48}{bind:ind1950        }{txt}{bind: int     }{bind:%8.0g     }{space 1}{bind:IND1950  }{bind:  }{res}{res}industry, 1950 basis{p_end}
{p 0 48}{bind:classwkr       }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:CLASSWKR }{bind:  }{res}{res}class of worker{p_end}
{p 0 48}{bind:uhrswork1      }{txt}{bind: int     }{bind:%8.0g     }{space 1}{txt}UHRSWORK1{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}hours usually worked per week at main job{p_end}
{p 0 48}{bind:educ           }{txt}{bind: int     }{bind:%8.0g     }{space 1}{bind:EDUC     }{bind:  }{res}{res}educational attainment recode{p_end}
{p 0 48}{bind:earnwt         }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}earnings weight{p_end}
{p 0 48}{bind:qearnwee       }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:QEARNWEE }{bind:  }{res}{res}data quality flag for earnweek{p_end}
{p 0 48}{bind:hourwage       }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:HOURWAGE }{bind:  }{res}{res}hourly wage{p_end}
{p 0 48}{bind:paidhour       }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:PAIDHOUR }{bind:  }{res}{res}paid by the hour{p_end}
{p 0 48}{bind:union          }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:UNION    }{bind:  }{res}{res}union membership{p_end}
{p 0 48}{bind:earnweek       }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:EARNWEEK }{bind:  }{res}{res}weekly earnings{p_end}
{p 0 48}{bind:uhrsworkorg    }{txt}{bind: int     }{bind:%8.0g     }{space 1}{bind:         }{bind:  }{res}{res}usual hours worked per week, outgoing rotation groups{p_end}
{txt}{hline}
Sorted by: 

{com}.   summarize

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}year {c |}{res}  6,738,088    2002.068    12.10799       1982       2024
{txt}{space 6}serial {c |}{res}  6,738,088    34874.83    20278.18          1      74625
{txt}{space 7}month {c |}{res}  6,738,088    6.505521    3.450084          1         12
{txt}{space 5}hwtfinl {c |}{res}  5,560,511    2223.566    1277.181          0   34716.21
{txt}{space 7}cpsid {c |}{res}  6,738,088    2.00e+13    1.21e+11   1.98e+13   2.02e+13
{txt}{hline 13}{c +}{hline 57}
{space 8}mish {c |}{res}  6,738,088    6.003526    1.999997          4          8
{txt}{space 6}region {c |}{res}  6,738,088    27.35454    10.74259         11         42
{txt}{space 6}pernum {c |}{res}  6,738,088    1.679193    .9420621          1         22
{txt}{space 6}wtfinl {c |}{res}  6,738,088    2164.166    1271.501      22.24   34716.21
{txt}{space 6}cpsidv {c |}{res}  6,738,088    2.00e+14    1.21e+12   1.98e+14   2.02e+14
{txt}{hline 13}{c +}{hline 57}
{space 6}cpsidp {c |}{res}  6,738,088    2.00e+13    1.21e+11   1.98e+13   2.02e+13
{txt}{space 3}earnweek2 {c |}{res}  6,738,088    1958.853    35654.57          0    1000000
{txt}{space 3}hourwage2 {c |}{res}  6,738,088    420.1412    485.9802        .05     999.99
{txt}{space 9}age {c |}{res}  6,738,088    39.04488    12.23483         18         64
{txt}{space 9}sex {c |}{res}  6,738,088    1.487791    .4998509          1          2
{txt}{hline 13}{c +}{hline 57}
{space 8}race {c |}{res}  6,738,088    142.7038    133.6738        100        830
{txt}{space 5}empstat {c |}{res}  6,738,088     10.0833    .3995664         10         12
{txt}{space 5}occ1950 {c |}{res}  6,738,088    421.1817    267.7166          0        970
{txt}{space 5}ind1950 {c |}{res}  6,738,088    676.7314     222.289        105        936
{txt}{space 4}classwkr {c |}{res}  6,738,088    22.68014    2.121586         13         28
{txt}{hline 13}{c +}{hline 57}
{space 3}uhrswork1 {c |}{res}  6,738,088    78.16546     189.717          0        997
{txt}{space 8}educ {c |}{res}  6,738,088    86.05168    23.06105          2        125
{txt}{space 6}earnwt {c |}{res}  6,738,088    8652.169    5093.023      90.01   209103.1
{txt}{space 4}qearnwee {c |}{res}  4,437,930    1.275338    1.864099          0          4
{txt}{space 4}hourwage {c |}{res}  6,545,976    418.8949     485.937        .01     999.99
{txt}{hline 13}{c +}{hline 57}
{space 4}paidhour {c |}{res}  6,738,088    1.587672    .4922536          1          2
{txt}{space 7}union {c |}{res}  6,517,390     1.17223     .419873          0          3
{txt}{space 4}earnweek {c |}{res}  6,545,976    676.4486    646.6187        .01    9999.99
{txt}{space 1}uhrsworkorg {c |}{res}  5,560,511    494.6838    480.6063          1        999
{txt}
{com}.   list year serial month hwtfinl cpsid mish region pernum wtfinl cpsidv in -10/l, noobs
{txt}
  {c TLC}{hline 6}{c -}{hline 8}{c -}{hline 10}{c -}{hline 11}{c -}{hline 13}{c -}{hline 7}{c -}{hline 10}{c -}{hline 8}{c -}{hline 11}{c -}{hline 13}{c TRC}
  {c |} {res}year   serial      month     hwtfinl         cpsid    mish     region   pernum      wtfinl        cpsidv {txt}{c |}
  {c LT}{hline 6}{c -}{hline 8}{c -}{hline 10}{c -}{hline 11}{c -}{hline 13}{c -}{hline 7}{c -}{hline 10}{c -}{hline 8}{c -}{hline 11}{c -}{hline 13}{c RT}
  {c |} {res}2024    69598   november    838.3943   2.02408e+13    four    pacific        1    838.3943   2.02408e+14 {txt}{c |}
  {c |} {res}2024    69604   november    4287.067   2.02308e+13   eight   east nor        1    4287.067   2.02308e+14 {txt}{c |}
  {c |} {res}2024    69604   november    4287.067   2.02308e+13   eight   east nor        2    4540.372   2.02308e+14 {txt}{c |}
  {c |} {res}2024    69607   november   2772.9405   2.02408e+13    four   new engl        1   2772.9405   2.02408e+14 {txt}{c |}
  {c |} {res}2024    69607   november   2772.9405   2.02408e+13    four   new engl        4    4273.887   2.02408e+14 {txt}{c |}
  {c LT}{hline 6}{c -}{hline 8}{c -}{hline 10}{c -}{hline 11}{c -}{hline 13}{c -}{hline 7}{c -}{hline 10}{c -}{hline 8}{c -}{hline 11}{c -}{hline 13}{c RT}
  {c |} {res}2024    69617   november   7670.1106   2.02308e+13   eight   east nor        1   7670.1106   2.02308e+14 {txt}{c |}
  {c |} {res}2024    69617   november   7670.1106   2.02308e+13   eight   east nor        2   6052.9955   2.02308e+14 {txt}{c |}
  {c |} {res}2024    69617   november   7670.1106   2.02308e+13   eight   east nor        3   7795.0071   2.02308e+14 {txt}{c |}
  {c |} {res}2024    69621   november   8640.0764   2.02308e+13   eight   east nor        1   8640.0764   2.02308e+14 {txt}{c |}
  {c |} {res}2024    69630   november   4171.2557   2.02408e+13    four   east sou        1   4171.2557   2.02408e+14 {txt}{c |}
  {c BLC}{hline 6}{c -}{hline 8}{c -}{hline 10}{c -}{hline 11}{c -}{hline 13}{c -}{hline 7}{c -}{hline 10}{c -}{hline 8}{c -}{hline 11}{c -}{hline 13}{c BRC}

{com}.   list cpsidp earnweek2 hourwage2 age sex race empstat occ1950 ind1950 classwkr in -10/l, noobs
{txt}
  {c TLC}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 5}{c -}{hline 8}{c -}{hline 18}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
  {c |} {res}     cpsidp   earnwe~2   hourwa~2   age      sex               race   empstat    occ1950    ind1950   classwkr {txt}{c |}
  {c LT}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 5}{c -}{hline 8}{c -}{hline 18}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  {c |} {res}2.02408e+13       2440     999.99    31     male         100. white   at work   managers   accounti   private, {txt}{c |}
  {c |} {res}2.02308e+13       1050     999.99    37     male         100. white   at work   managers   eating a   private, {txt}{c |}
  {c |} {res}2.02308e+13       1850     999.99    34   female         100. white   at work   managers   eating a   private, {txt}{c |}
  {c |} {res}2.02408e+13       1200     999.99    57   female         100. white   at work   clerical   legal se   private, {txt}{c |}
  {c |} {res}2.02408e+13       3360     999.99    29     male         100. white   at work   engineer   syntheti   private, {txt}{c |}
  {c LT}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 5}{c -}{hline 8}{c -}{hline 18}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  {c |} {res}2.02308e+13        640         16    57   female         200. black   at work    service   miscella   private, {txt}{c |}
  {c |} {res}2.02308e+13        408         17    20     male   801. white-black   at work    service   eating a   private, {txt}{c |}
  {c |} {res}2.02308e+13        480         20    30     male   801. white-black   at work    service   eating a   private, {txt}{c |}
  {c |} {res}2.02308e+13        808         17    25   female         200. black   at work   professi   educatio   private, {txt}{c |}
  {c |} {res}2.02408e+13        800         20    29   female         200. black   at work   clerical   legal se   private, {txt}{c |}
  {c BLC}{hline 13}{c -}{hline 10}{c -}{hline 10}{c -}{hline 5}{c -}{hline 8}{c -}{hline 18}{c -}{hline 9}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}.   list uhrswork1 educ earnwt qearnwee hourwage paidhour union earnweek uhrsworkorg in -10/l, noobs
{txt}
  {c TLC}{hline 10}{c -}{hline 10}{c -}{hline 12}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c TRC}
  {c |} {res}uhrswo~1       educ       earnwt   qearnwee   hourwage   paidhour      union   earnweek   uhrswo~g {txt}{c |}
  {c LT}{hline 10}{c -}{hline 10}{c -}{hline 12}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  {c |} {res}      40   bachelor    3286.6294   not allo          .         no   no union          .        999 {txt}{c |}
  {c |} {res}      40   bachelor   17089.3593   not allo          .         no   no union          .        999 {txt}{c |}
  {c |} {res}      40   bachelor    18089.269   not allo          .         no   no union          .        999 {txt}{c |}
  {c |} {res}      40   high sch   10877.5911   allocate          .         no   no union          .        999 {txt}{c |}
  {c |} {res}hours va   bachelor   17004.6319   allocate          .         no   no union          .        999 {txt}{c |}
  {c LT}{hline 10}{c -}{hline 10}{c -}{hline 12}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c RT}
  {c |} {res}      45   associat   28851.0844   not allo          .        yes   member o          .         40 {txt}{c |}
  {c |} {res}      24   high sch   24264.4613   allocate          .        yes   no union          .         24 {txt}{c |}
  {c |} {res}      24   high sch   30525.4348   allocate          .        yes   no union          .         24 {txt}{c |}
  {c |} {res}      40   master's   33516.3721   not allo          .        yes   no union          .         40 {txt}{c |}
  {c |} {res}      40   high sch   16299.3536   allocate          .        yes   no union          .         40 {txt}{c |}
  {c BLC}{hline 10}{c -}{hline 10}{c -}{hline 12}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c -}{hline 10}{c BRC}

{com}. 
. * drop any variables not needed
.   drop serial cpsid cpsidp pernum hwtfinl wtfinl
{txt}
{com}. *** end part a 
. 
. * part b
. 
. * recoding missing values with .
.   replace region=. if region ==97
{txt}(0 real changes made)

{com}.   replace earnweek2=. if earnweek2==999999.99
{txt}(8,586 real changes made, 8,586 to missing)

{com}.   replace hourwage2=. if hourwage2==999.99    
{txt}(2,779,881 real changes made, 2,779,881 to missing)

{com}.   replace sex=. if sex==9
{txt}(0 real changes made)

{com}.   replace race=. if race==999
{txt}(0 real changes made)

{com}.   replace empstat=. if empstat==00
{txt}(0 real changes made)

{com}.   replace occ1950=. if inlist(occ1950, 997, 999)
{txt}(0 real changes made)

{com}.   replace ind1950=. if inlist(ind1950, 000, 001, 998, 999)
{txt}(0 real changes made)

{com}.   replace classwkr=. if inlist(classwkr, 00, 99)
{txt}(0 real changes made)

{com}.   replace uhrswork1=. if uhrswork1==999
{txt}(0 real changes made)

{com}.   replace educ=. if inlist(educ, 000, 001, 999)
{txt}(0 real changes made)

{com}.   replace hourwage=. if hourwage==999.99
{txt}(2,693,538 real changes made, 2,693,538 to missing)

{com}.   replace paidhour=. if inlist(paidhour, 0, 6, 7)
{txt}(0 real changes made)

{com}.   replace union=. if union ==0
{txt}(53 real changes made, 53 to missing)

{com}.   replace earnweek=. if earnweek==9999.99
{txt}(8,572 real changes made, 8,572 to missing)

{com}.   replace uhrsworkorg=. if inlist(uhrsworkorg, 998, 999)
{txt}(2,646,162 real changes made, 2,646,162 to missing)

{com}. 
. * replacing sex with dummy variable for female
.   generate female = sex-1
{txt}
{com}.   drop sex
{txt}
{com}.   order female, before(race)
{txt}
{com}.   
. * recoding paidhour as a dummy variable
.   replace paidhour = paidhour-1
{txt}(6,738,088 real changes made)

{com}. 
. * recoding race
.   replace race=650 if inlist(race, 651, 652) & year>=2003
{txt}(183,076 real changes made)

{com}.   replace race=700 if inrange(race, 800, 830) & year>=2003
{txt}(55,615 real changes made)

{com}.   tab year race, missing

    {txt}survey {c |}                          race
      year {c |} 100. whit  200. blac  300. amer  650. asia  700. othe {c |}     Total
{hline 11}{c +}{hline 55}{c +}{hline 10}
      1982 {c |}{res}   146,627     14,669          0          0      5,354 {txt}{c |}{res}   166,650 
{txt}      1983 {c |}{res}   145,099     14,722          0          0      5,354 {txt}{c |}{res}   165,175 
{txt}      1984 {c |}{res}   147,612     15,322          0          0      5,517 {txt}{c |}{res}   168,451 
{txt}      1985 {c |}{res}   150,014     16,027          0          0      5,573 {txt}{c |}{res}   171,614 
{txt}      1986 {c |}{res}   148,277     16,274          0          0      5,715 {txt}{c |}{res}   170,266 
{txt}      1987 {c |}{res}   148,758     16,685          0          0      5,804 {txt}{c |}{res}   171,247 
{txt}      1988 {c |}{res}   142,956     15,764          0          0      5,454 {txt}{c |}{res}   164,174 
{txt}      1989 {c |}{res}   145,665     15,917      1,274      4,420        336 {txt}{c |}{res}   167,612 
{txt}      1990 {c |}{res}   152,628     16,739      1,331      5,130        427 {txt}{c |}{res}   176,255 
{txt}      1991 {c |}{res}   148,002     16,077      1,375      5,303        539 {txt}{c |}{res}   171,296 
{txt}      1992 {c |}{res}   145,775     15,758      1,403      5,414        610 {txt}{c |}{res}   168,960 
{txt}      1993 {c |}{res}   142,959     15,843      1,539      5,551        822 {txt}{c |}{res}   166,714 
{txt}      1994 {c |}{res}   138,455     15,509      1,525      5,464      1,792 {txt}{c |}{res}   162,745 
{txt}      1995 {c |}{res}   136,838     15,731      1,463      5,595      2,634 {txt}{c |}{res}   162,261 
{txt}      1996 {c |}{res}   123,995     13,979      1,531      5,298          0 {txt}{c |}{res}   144,803 
{txt}      1997 {c |}{res}   125,932     14,384      1,635      5,589          0 {txt}{c |}{res}   147,540 
{txt}      1998 {c |}{res}   126,956     14,662      1,720      5,940          0 {txt}{c |}{res}   149,278 
{txt}      1999 {c |}{res}   128,952     14,992      1,641      5,886          0 {txt}{c |}{res}   151,471 
{txt}      2000 {c |}{res}   129,688     15,324      1,783      6,280          0 {txt}{c |}{res}   153,075 
{txt}      2001 {c |}{res}   142,204     16,483      2,039      7,125          0 {txt}{c |}{res}   167,851 
{txt}      2002 {c |}{res}   148,990     16,602      2,111      7,335          0 {txt}{c |}{res}   175,038 
{txt}      2003 {c |}{res}   145,295     15,683      1,595      6,711      2,577 {txt}{c |}{res}   171,861 
{txt}      2004 {c |}{res}   142,104     15,286      1,764      6,877      2,843 {txt}{c |}{res}   168,874 
{txt}      2005 {c |}{res}   142,662     15,269      1,643      7,221      3,132 {txt}{c |}{res}   169,927 
{txt}      2006 {c |}{res}   141,472     15,592      1,549      7,565      3,018 {txt}{c |}{res}   169,196 
{txt}      2007 {c |}{res}   139,499     15,869      1,610      7,784      2,689 {txt}{c |}{res}   167,451 
{txt}      2008 {c |}{res}   137,551     15,604      1,606      8,036      2,557 {txt}{c |}{res}   165,354 
{txt}      2009 {c |}{res}   133,797     14,824      1,428      8,018      2,498 {txt}{c |}{res}   160,565 
{txt}      2010 {c |}{res}   131,687     15,195      1,393      8,110      2,528 {txt}{c |}{res}   158,913 
{txt}      2011 {c |}{res}   129,996     14,776      1,418      8,451      2,501 {txt}{c |}{res}   157,142 
{txt}      2012 {c |}{res}   128,888     14,837      1,453      8,815      2,399 {txt}{c |}{res}   156,392 
{txt}      2013 {c |}{res}   127,904     14,918      1,433      9,036      2,424 {txt}{c |}{res}   155,715 
{txt}      2014 {c |}{res}   128,025     15,409      1,482      9,029      2,566 {txt}{c |}{res}   156,511 
{txt}      2015 {c |}{res}   125,029     16,147      1,744      9,143      2,422 {txt}{c |}{res}   154,485 
{txt}      2016 {c |}{res}   124,596     16,208      1,843      9,444      2,376 {txt}{c |}{res}   154,467 
{txt}      2017 {c |}{res}   122,430     15,861      1,736      9,519      2,528 {txt}{c |}{res}   152,074 
{txt}      2018 {c |}{res}   119,304     15,161      1,660      9,419      2,653 {txt}{c |}{res}   148,197 
{txt}      2019 {c |}{res}   114,973     14,539      1,620      9,177      2,586 {txt}{c |}{res}   142,895 
{txt}      2020 {c |}{res}    99,416     12,234      1,381      7,924      2,098 {txt}{c |}{res}   123,053 
{txt}      2021 {c |}{res}    98,674     12,671      1,401      8,401      2,282 {txt}{c |}{res}   123,429 
{txt}      2022 {c |}{res}    94,546     12,223      1,364      8,494      2,299 {txt}{c |}{res}   118,926 
{txt}      2023 {c |}{res}    91,429     11,661      1,328      8,156      2,410 {txt}{c |}{res}   114,984 
{txt}      2024 {c |}{res}    83,703     10,329      1,194      7,746      2,229 {txt}{c |}{res}   105,201 
{txt}{hline 11}{c +}{hline 55}{c +}{hline 10}
     Total {c |}{res} 5,669,362    647,759     56,015    263,406    101,546 {txt}{c |}{res} 6,738,088 
{txt}
{com}. 
. * recoding grade
.   generate grade =.
{txt}(6,738,088 missing values generated)

{com}.   **1982-1991
.   replace grade=0  if educ==2 & year<=1991 // (none or preschool)
{txt}(3,693 real changes made)

{com}.   replace grade=1  if educ==11 & year<=1991
{txt}(827 real changes made)

{com}.   replace grade=2  if educ==12 & year<=1991
{txt}(2,023 real changes made)

{com}.   replace grade=3  if educ==13 & year<=1991
{txt}(3,228 real changes made)

{com}.   replace grade=4  if educ==14 & year<=1991
{txt}(4,010 real changes made)

{com}.   replace grade=5  if educ==21 & year<=1991
{txt}(5,261 real changes made)

{com}.   replace grade=6  if educ==22 & year<=1991
{txt}(13,252 real changes made)

{com}.   replace grade=7  if educ==31 & year<=1991
{txt}(11,324 real changes made)

{com}.   replace grade=8  if educ==32 & year<=1991
{txt}(37,861 real changes made)

{com}.   replace grade=9  if educ==40 & year<=1991
{txt}(38,411 real changes made)

{com}.   replace grade=10 if educ==50 & year<=1991
{txt}(56,240 real changes made)

{com}.   replace grade=11 if educ==60 & year<=1991
{txt}(60,845 real changes made)

{com}.   replace grade=12 if (educ==72 | educ==73) & year<=1991 // 72 is `diploma unclear'
{txt}(704,348 real changes made)

{com}.   replace grade=13 if educ==80 & year<=1991
{txt}(134,820 real changes made)

{com}.   replace grade=14 if educ==90 & year<=1991
{txt}(168,063 real changes made)

{com}.   replace grade=15 if educ==100 & year<=1991
{txt}(63,319 real changes made)

{com}.   replace grade=16 if educ==110 & year<=1991
{txt}(229,636 real changes made)

{com}.   replace grade=17 if educ==121 & year<=1991
{txt}(45,334 real changes made)

{com}.   replace grade=18 if educ==122 & year<=1991
{txt}(110,245 real changes made)

{com}.   **1992-2024 (Jaeger 1997)
.   replace grade=0   if educ==2  & year>=1992
{txt}(8,229 real changes made)

{com}.   replace grade=2.5 if educ==10 & year>=1992 // grades 1-4
{txt}(21,107 real changes made)

{com}.   replace grade=5.5 if educ==20 & year>=1992 // grades 5-6
{txt}(49,851 real changes made)

{com}.   replace grade=7.5 if educ==30 & year>=1992 // grades 7-8
{txt}(50,759 real changes made)

{com}.   replace grade=9   if educ==40 & year>=1992 // grade 9
{txt}(56,283 real changes made)

{com}.   replace grade=10  if educ==50 & year>=1992 // grade 10
{txt}(73,186 real changes made)

{com}.   replace grade=11  if educ==60 & year>=1992 // grade 11
{txt}(111,530 real changes made)

{com}.   replace grade=12  if (educ==71 | educ==73) & year>=1992 // 71 is `no diploma'
{txt}(1,558,364 real changes made)

{com}.   replace grade=13  if educ==81 & year>=1992 // some college, no degree
{txt}(977,528 real changes made)

{com}.   replace grade=14  if (educ==91 | educ==92) & year>=1992 // academic or vocational associate's degree
{txt}(510,086 real changes made)

{com}.   replace grade=16  if educ==111 & year>=1992
{txt}(1,072,281 real changes made)

{com}.   replace grade=18  if inlist(educ, 123, 124, 125) & year>=1992
{txt}(556,144 real changes made)

{com}.   order grade, before(educ)
{txt}
{com}. 
. * recoding occupation
.   recode occ1950 ///
>     (0/99=1) /// professional, technical
>     (100/290=2) /// managers, officials, proprietors
>     (300/390=3) /// clerical, kindred
>     (400/490=4) /// sales
>     (500/594=5) /// craftsmen
>     (600/690=6) /// operatives
>     (700/720=7) /// service (private hh)
>     (730/790=8) /// service (other)
>     (810/970=9) /// laborers
>     (595=10) /// armed forces
>     , generate(occupation) 
{txt}(6,737,619 differences between {bf:occ1950} and {bf:occupation})

{com}.   * check everything is recoded 
.     tab occ1950 if occ1950~=. & occupation==.
{txt}no observations

{com}.   
. * recoding industry
.   recode ind1950 ///
>     (105/239=1) /// agriculture, fisheries, metal mining, coal mining
>     (246/246=2) /// construction
>     (306/399=3) /// durable manufacturing
>     (406/499=4) /// nondurable manufacturing
>     (506/598=5) /// communications, transportation, utilities
>     (606/627=6) /// wholesale trade
>     (636/699=7) /// retail trade
>     (716/756=8) /// professional services, fire
>     (868/879=8) /// professional services, fire
>     (897/899=8) /// professional services, fire
>     (888/896=9)  /// education, welfare services
>     (906/946=10) /// public administration
>     (806/859=11) /// other services
>     (997/998=11)  /// other services
>     , generate(industry)
{txt}(6,738,088 differences between {bf:ind1950} and {bf:industry})

{com}.   * check everything is covered
.   tab ind1950 if ind1950~=. & industry==.
{txt}no observations

{com}. 
. * replacing missing values of earnweek and hourwage
.   replace earnweek = earnweek2 if missing(earnweek) & !missing(earnweek2)
{txt}(192,098 real changes made)

{com}.   replace hourwage = hourwage2 if missing(hourwage) & !missing(hourwage2)
{txt}(105,769 real changes made)

{com}.   summarize earnweek2, meanonly
{txt}
{com}.   scalar max_earnweek2 = r(max) // required for topcoding
{txt}
{com}.   drop earnweek2 hourwage2
{txt}
{com}. 
. * creating topcode variable to identify top-coded values of earnweek 
.   generate topcode=.
{txt}(6,738,088 missing values generated)

{com}.   replace topcode=1 if earnweek>=999 & inrange(year, 1982, 1988) // & !missing(earnweek)
{txt}(34,917 real changes made)

{com}.   replace topcode=1 if earnweek>=1923 & inrange(year, 1989, 1997) // & !missing(earnweek)
{txt}(16,218 real changes made)

{com}.   replace topcode=1 if earnweek>=2884.61 & (inrange(year, 1998, 2022) | (year==2023 & month <=3)) // & !missing(earnweek)
{txt}(103,264 real changes made)

{com}.   replace topcode=1 if earnweek>=max_earnweek2 & ((year == 2023 & month >= 4) | (year == 2024 & month <= 3)) & mish == 4 // & !missing(earnweek)
{txt}(75 real changes made)

{com}.   replace topcode=1 if earnweek>=2884.61 & ((year == 2023 & month >= 4) | (year == 2024 & month <= 3)) & mish == 8 // & !missing(earnweek)
{txt}(4,515 real changes made)

{com}.   replace topcode=0 if topcode==.
{txt}(6,579,099 real changes made)

{com}.   tab topcode

    {txt}topcode {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}  6,579,099       97.64       97.64
{txt}          1 {c |}{res}    158,989        2.36      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}  6,738,088      100.00
{txt}
{com}.   
. * replacing top-coded values of earnweek with 1.5 times the top-coded values
.   replace earnweek = $tcscale * earnweek if topcode == 1
{txt}(150,483 real changes made)

{com}. 
. * labeling new variables female, paidhour, grade, occupation, industry, topcode
.   label define FEMALE 0 "male" 1 "female"
{txt}
{com}.   label value female FEMALE
{txt}
{com}.   label define PAIDHOUR 0 "not paid hourly" 1 "paid hourly", modify
{txt}
{com}.   label value paidhour PAIDHOUR
{txt}
{com}.   label variable grade "highest grade completed"
{txt}
{com}.   label define OCCUPATION 1 "professional, technical" ///
>                           2 "managers, officials, proprietors" ///
>                           3 "clerical, kindred" ///
>                           4 "sales" ///
>                           5 "craftsmen" ///
>                           6 "operatives" ///
>                           7 "service (private hh)" ///
>                           8 "service (other)" ///
>                           9 "laborers" ///
>                           10 "armed forces" 
{txt}
{com}.   label value occupation OCCUPATION
{txt}
{com}.   label variable occupation "occupation (1-10)"
{txt}
{com}.   label define INDUSTRY 1 "agriculture, fisheries, metal mining, coal mining" ///
>                         2 "construction" ///
>                         3 "durable manufacturing" ///
>                         4 "nondurable manufacturing" ///
>                         5 "communications, transportation, utilities" ///
>                         6 "wholesale trade" ///
>                         7 "retail trade" ///
>                         8 "professional services, fire" ///
>                         9 "education, welfare services" ///
>                         10 "public administration" ///
>                         11 "other services"
{txt}
{com}.   label value industry INDUSTRY
{txt}
{com}.   label variable industry "industry (1-11)"
{txt}
{com}.   label variable topcode "topcode indicator"
{txt}
{com}. 
. * dropping variables replaced by grade, occupation, industry
.   drop educ occ1950 ind1950
{txt}
{com}. 
. *** end part b
. 
. * part c
. * saving the data
.   compress
  {txt}variable {bf}{res}female{sf}{txt} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
  {txt}variable {bf}{res}uhrsworkorg{sf}{txt} was {bf}{res}int{sf}{txt} now {bf}{res}byte{sf}
  {txt}variable {bf}{res}occupation{sf}{txt} was {bf}{res}int{sf}{txt} now {bf}{res}byte{sf}
  {txt}variable {bf}{res}industry{sf}{txt} was {bf}{res}int{sf}{txt} now {bf}{res}byte{sf}
  {txt}variable {bf}{res}topcode{sf}{txt} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (60,642,792 bytes saved)

{com}.   save "../Data/CPS ORGs, 1982-$eyear, Cleaned.dta", replace
{txt}{p 0 4 2}
file {bf}
../Data/CPS ORGs, 1982-2024, Cleaned.dta{rm}
saved
{p_end}

{com}.   describe

{txt}Contains data from {res}../Data/CPS ORGs, 1982-2024, Cleaned.dta
{txt} Observations:{res}     6,738,088                  
{txt}    Variables:{res}            22                  11 Jan 2025 08:30
{txt}{hline}
Variable      Storage   Display    Value
    name         type    format    label      Variable label
{hline}
{p 0 48}{res}{bind:year           }{txt}{bind: int     }{bind:%8.0g     }{space 1}{bind:         }{bind:  }{res}{res}survey year{p_end}
{p 0 48}{bind:month          }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:MONTH    }{bind:  }{res}{res}month{p_end}
{p 0 48}{bind:mish           }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:MISH     }{bind:  }{res}{res}month in sample, household level{p_end}
{p 0 48}{bind:region         }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:REGION   }{bind:  }{res}{res}region and division{p_end}
{p 0 48}{bind:cpsidv         }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}validated longitudinal identifier{p_end}
{p 0 48}{bind:age            }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:AGE      }{bind:  }{res}{res}age{p_end}
{p 0 48}{bind:female         }{txt}{bind: byte    }{bind:%9.0g     }{space 1}{bind:FEMALE   }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:race           }{txt}{bind: int     }{bind:%58.0g    }{space 1}{bind:RACE     }{bind:  }{res}{res}race{p_end}
{p 0 48}{bind:empstat        }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:EMPSTAT  }{bind:  }{res}{res}employment status{p_end}
{p 0 48}{bind:classwkr       }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:CLASSWKR }{bind:  }{res}{res}class of worker{p_end}
{p 0 48}{bind:uhrswork1      }{txt}{bind: int     }{bind:%8.0g     }{space 1}{txt}UHRSWORK1{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}hours usually worked per week at main job{p_end}
{p 0 48}{bind:grade          }{txt}{bind: float   }{bind:%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}highest grade completed{p_end}
{p 0 48}{bind:earnwt         }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:         }{bind:  }{res}{res}earnings weight{p_end}
{p 0 48}{bind:qearnwee       }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:QEARNWEE }{bind:  }{res}{res}data quality flag for earnweek{p_end}
{p 0 48}{bind:hourwage       }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:HOURWAGE }{bind:  }{res}{res}hourly wage{p_end}
{p 0 48}{bind:paidhour       }{txt}{bind: byte    }{bind:%15.0g    }{space 1}{bind:PAIDHOUR }{bind:  }{res}{res}paid by the hour{p_end}
{p 0 48}{bind:union          }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:UNION    }{bind:  }{res}{res}union membership{p_end}
{p 0 48}{bind:earnweek       }{txt}{bind: double  }{bind:%12.0g    }{space 1}{bind:EARNWEEK }{bind:  }{res}{res}weekly earnings{p_end}
{p 0 48}{bind:uhrsworkorg    }{txt}{bind: byte    }{bind:%8.0g     }{space 1}{bind:         }{bind:  }{res}{res}usual hours worked per week, outgoing rotation groups{p_end}
{p 0 48}{bind:occupation     }{txt}{bind: byte    }{bind:%32.0g    }{space 1}{txt}OCCUPATION{p_end}
{p 0 48}{space 44}{bind:  }{res}{res}occupation (1-10){p_end}
{p 0 48}{bind:industry       }{txt}{bind: byte    }{bind:%49.0g    }{space 1}{bind:INDUSTRY }{bind:  }{res}{res}industry (1-11){p_end}
{p 0 48}{bind:topcode        }{txt}{bind: byte    }{bind:%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}topcode indicator{p_end}
{txt}{hline}
Sorted by: 

{com}.   summarize

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}year {c |}{res}  6,738,088    2002.068    12.10799       1982       2024
{txt}{space 7}month {c |}{res}  6,738,088    6.505521    3.450084          1         12
{txt}{space 8}mish {c |}{res}  6,738,088    6.003526    1.999997          4          8
{txt}{space 6}region {c |}{res}  6,738,088    27.35454    10.74259         11         42
{txt}{space 6}cpsidv {c |}{res}  6,738,088    2.00e+14    1.21e+12   1.98e+14   2.02e+14
{txt}{hline 13}{c +}{hline 57}
{space 9}age {c |}{res}  6,738,088    39.04488    12.23483         18         64
{txt}{space 6}female {c |}{res}  6,738,088    .4877906    .4998509          0          1
{txt}{space 8}race {c |}{res}  6,738,088     141.819    129.5985        100        700
{txt}{space 5}empstat {c |}{res}  6,738,088     10.0833    .3995664         10         12
{txt}{space 4}classwkr {c |}{res}  6,738,088    22.68014    2.121586         13         28
{txt}{hline 13}{c +}{hline 57}
{space 3}uhrswork1 {c |}{res}  6,738,088    78.16546     189.717          0        997
{txt}{space 7}grade {c |}{res}  6,738,088    13.49376    2.614426          0         18
{txt}{space 6}earnwt {c |}{res}  6,738,088    8652.169    5093.023      90.01   209103.1
{txt}{space 4}qearnwee {c |}{res}  4,437,930    1.275338    1.864099          0          4
{txt}{space 4}hourwage {c |}{res}  3,958,207    12.89962    8.767912        .01      99.99
{txt}{hline 13}{c +}{hline 57}
{space 4}paidhour {c |}{res}  6,738,088    .5876722    .4922536          0          1
{txt}{space 7}union {c |}{res}  6,517,337    1.172239    .4198614          1          3
{txt}{space 4}earnweek {c |}{res}  6,729,502    711.4856    709.6454          0      11960
{txt}{space 1}uhrsworkorg {c |}{res}  2,914,349    36.77634    9.983109          1         99
{txt}{space 2}occupation {c |}{res}  6,738,088    3.936502     2.59726          1          9
{txt}{hline 13}{c +}{hline 57}
{space 4}industry {c |}{res}  6,738,088    6.976406    2.776901          1         11
{txt}{space 5}topcode {c |}{res}  6,738,088    .0235956    .1517854          0          1
{txt}
{com}. *** end part c
. 
. log close results
      {txt}name:  {res}results
       {txt}log:  {res}/Users/peterreadman/Dropbox/@10,000 feet and Runway/MA in Economics at Hunter/ECO 727 - Data Analysis and Research Methods/Analysis/Exercise_2_Readman.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}11 Jan 2025, 08:30:12
{txt}{.-}
{smcl}
{txt}{sf}{ul off}